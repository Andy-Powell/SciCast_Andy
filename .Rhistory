tstart <- as.POSIXct("2013-11-25 00:00:00 EST");        # postive number of seconds since 1/1/1970
base <- tstart-28*24*60*60;                             # base is tstart - a 28-day month => 10/25/13 in seconds
tstop <- tstart+floor(Sys.time()-tstart)-1*60*60        # tstop = system time (in whole seconds) - 1 hour
days <- seq(1,ceiling(as.double(tstop - tstart)),1)     # vector that is a sequense from one to system time in whole seconds by second.  How doees it relate to days?
print(tstart)
print(base)
print(tstop)
print(days)
print(as.double(tstart))
print(as.double(tstart))
print(as.double(base))
print(as.double(tstop))
print(days)
print(as.double(tstop-tstart))
print(as.double(tstop-tstart))
print(tstop-tstart)
print(difftime(tstop,tstart,units="secs"))
print(difftime(tstop,tstart,units="mins"))
print(difftime(tstop,tstart,units="hrs"))
print(difftime(tstop,tstart,units="hours"))
print(difftime(tstop,tstart,units="days"))
print(strsplit(as.character(tstop), ' ')[[1]][1])
print(tstop)
print(strsplit(as.character(tstop), ' ')[[1]][1])
tstart <- as.POSIXct("2013-11-25 00:00:00 EST");        # postive number of seconds since 1/1/1970
tstop <- Sys.time()
days <- seq(1,ceiling(as.double(tstop - tstart)),1)
print(days)
print(difftime(tstop,tstart,units="days"))
print(tstop-tstart)
f <- function(x) {
f <- function(x) {
f <- function(x) {
x ^ 2
}
f(x) + 1
}
f(x) * 2
}
f(10)
setwd("C:/Users/Walter/Documents/GitHub/SciCast_Andy/SciCast_Andy")
RBD <- read.csv("tradeData.csv")
for (q in RBD$questionId[1] {
tradeDataQ <- tradeData[tradeData$questionID==q]
}
for (q in RBD$questionId[1]) {
tradeDataQ <- tradeData[tradeData$questionID==q]
}
for (q in RBD$questionId[1]) {
RBDQ <- RBD[RBD$questionID==q]
}
RBDQ
dim(RBD)
q
for (q in RBD$questionId[1]) {
RBDQ <- RBD[RBD$questionID==q,]
}
dim(RBDQ)
RBDQ
RBD[RBD$questionID==2,]
RBD[RBD$questionID=="2",]
RBD[RBD$questionID=="3",]
class(RBD$questionId)
class9RBD
class(RBD)
sort(RBD$questionID)
sort(RBD$questionId)
RBD[RBD$questionID==2,]
RBD[RBD$questionId==2,]
for (q in RBD$questionId[1]) {
RBDQ <- RBD[RBD$questionID==as.integer(q),]
}
RBDQ
q
for (q in RBD$questionId[1]) {
RBDQ <- RBD[RBD$questionId==q,]
}
for (q in RBD$questionId[1]) {
RBDQ <- RBD[RBD$questionId==q,]
}
RBDQ
RBD[1:100,1:5]
RBD[97:200,1:5]
RBD <- read.csv("tradeData.csv")    #RBD => raw brier data
brierDiff <- rep(2,length(RBD))
for (tr in 2:length(RBD$tradedAt)) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1])>0) {
brierDiff[tr] <- difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1])
} else {brierDiff[tr] <- NA}
}
for (tr in 2:5) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1])>0) {
brierDiff[tr] <- difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1])
} else {brierDiff[tr] <- NA}
print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],brierDiff[tr])))
}
RBD$tradedAt[1:150]
class(RBD$tradedAt)
difftime(as.POSIXct(RBD$tradedAt[2]),asPOSIXct(RBD$tradedAt[1]))
difftime(as.POSIXct(RBD$tradedAt[2]),as.POSIXct(RBD$tradedAt[1]))
for (tr in 2:5) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]))>0,units="days") {
brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),asPOSIXct(RBD$tradedAt[tr-1],unite="days"))
} else {brierDiff[tr] <- NA}
print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],uints="days"),brierDiff[tr])))
}
for (tr in 2:5) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),units="days")>0,) {
brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),asPOSIXct(RBD$tradedAt[tr-1],unite="days"))
} else {brierDiff[tr] <- NA}
print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
}
brierDiff <- rep(2,length(RBD))
#ord <- order(RBD$questionId, RBD$tradedAt)
#RBD <- RBD(ord)
brierDiff[1] <- NA
#for (tr in 2:length(RBD$tradedAt)) {
for (tr in 2:5) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),units="days")>0,) {
brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),asPOSIXct(RBD$tradedAt[tr-1],unite="days"))
} else {brierDiff[tr] <- NA}
print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
}
for (tr in 2:5) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),units="days")>0,) {
brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),asPOSIXct(RBD$tradedAt[tr-1]),units="days")
} else {brierDiff[tr] <- NA}
print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
}
brierDiff[1] <- NA
#for (tr in 2:length(RBD$tradedAt)) {
for (tr in 2:5) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),units="days")>0,) {
brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),asPOSIXct(RBD$tradedAt[tr-1]),units="days")
} else {brierDiff[tr] <- NA}
#print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
}
for (tr in 2:5) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0,) {
brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),asPOSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
#print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
}
for (tr in 2:5) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0,) {
brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),asPOSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
#print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
#}
tr
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0,) {
brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),asPOSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
for (tr in 2:5) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),asPOSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
}
brierDiff[1] <- NA
#for (tr in 2:length(RBD$tradedAt)) {
for (tr in 2:5) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
}
for (tr in 2:150) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
}
class(RBD)
RBD$brierDiff[1] <- NA
#for (tr in 2:length(RBD$tradedAt)) {
#for (tr in 2:150) {
#  if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
#    brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
#  } else {brierDiff[tr] <- NA}
#  print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
#}
for (tr in 2:length(RBD$tradedAt)) {
#for (tr in 2:150) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
RBD$brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
}
RBD$brierDiff[1] <- NA
#for (tr in 2:length(RBD$tradedAt)) {
#for (tr in 2:150) {
#  if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
#    brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
#  } else {brierDiff[tr] <- NA}
#  print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
#}
#for (tr in 2:length(RBD$tradedAt)) {
for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
RBD$brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),RBD$brierDiff[tr]))
}
RBD[1:400,]
RBD$brierDiff[1] <- NA
#for (tr in 2:length(RBD$tradedAt)) {
#for (tr in 2:150) {
#  if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
#    brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
#  } else {brierDiff[tr] <- NA}
#  print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),brierDiff[tr]))
#}
#for (tr in 2:length(RBD$tradedAt)) {
for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
RBD$brierDiff[tr] <- RBD$brier[tr]-RBD$brier[tr-1]
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),RBD$brierDiff[tr]))
}
RBD$brierDiff[1] <- NA
#for (tr in 2:length(RBD$tradedAt)) {
#for (tr in 2:150) {
#  if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
#    RBD$brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
#  } else {brierDiff[tr] <- NA}
#  print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],"days"),RBD$brierDiff[tr]))
#}
#for (tr in 2:length(RBD$tradedAt)) {
for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
RBD$brierDiff[tr] <- RBD$brier[tr]-RBD$brier[tr-1]
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),RBD$brierDiff[tr]))
}
RBD[1:200,]
RBD$brierDiff[1] <- NA
#for (tr in 2:length(RBD$tradedAt)) {
#for (tr in 2:150) {
#  if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
#    RBD$brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
#  } else {brierDiff[tr] <- NA}
#  print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],"days"),RBD$brierDiff[tr]))
#}
#for (tr in 2:length(RBD$tradedAt)) {
for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
RBD$brierDiff[tr] <- RBD$Brier[tr]-RBD$Brier[tr-1]
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),RBD$brierDiff[tr]))
}
RBD$brierDiff[1] <- NA
RBD$diffWeight[1] <- NA
#for (tr in 2:length(RBD$tradedAt)) {
#for (tr in 2:150) {
#  if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
#    RBD$brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
#  } else {brierDiff[tr] <- NA}
#  print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],"days"),RBD$brierDiff[tr]))
#}
#for (tr in 2:length(RBD$tradedAt)) {
for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
RBD$brierDiff[tr] <- RBD$Brier[tr]-RBD$Brier[tr-1]
RBD$diffWeight[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]))
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),RBD$brierDiff[tr]))
}
RBD[1:200]
RBD[1:200,]
RBD <- read.csv("tradeData.csv")    #RBD => raw brier data
brierDiff <- rep(2,length(RBD))
#ord <- order(RBD$questionId, RBD$tradedAt)
#RBD <- RBD(ord)
RBD$brierDiff[1] <- NA
RBD$diffWeight[1] <- NA
#for (tr in 2:length(RBD$tradedAt)) {
#for (tr in 2:150) {
#  if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
#    RBD$brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
#  } else {brierDiff[tr] <- NA}
#  print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],"days"),RBD$brierDiff[tr]))
#}
for (tr in 2:length(RBD$tradedAt)) {
#for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
RBD$brierDiff[tr] <- RBD$Brier[tr]-RBD$Brier[tr-1]
RBD$diffWeight[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),RBD$brierDiff[tr]))
}
RBD$brierDiff[1] <- NA
RBD$diffWeight[1] <- NA
#for (tr in 2:length(RBD$tradedAt)) {
#for (tr in 2:150) {
#  if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
#    RBD$brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
#  } else {brierDiff[tr] <- NA}
#  print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],"days"),RBD$brierDiff[tr]))
#}
#for (tr in 2:length(RBD$tradedAt)) {
for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
RBD$brierDiff[tr] <- RBD$Brier[tr]-RBD$Brier[tr-1]
RBD$diffWeight[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),RBD$brierDiff[tr],RBD$diffWeight))
}
RBD <- read.csv("tradeData.csv")    #RBD => raw brier data
RBD$brierDiff[1] <- NA
RBD$diffWeight[1] <- NA
#for (tr in 2:length(RBD$tradedAt)) {
#for (tr in 2:150) {
#  if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
#    RBD$brierDiff[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
#  } else {brierDiff[tr] <- NA}
#  print(c(RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],"days"),RBD$brierDiff[tr]))
#}
#for (tr in 2:length(RBD$tradedAt)) {
for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
RBD$brierDiff[tr] <- RBD$Brier[tr]-RBD$Brier[tr-1]
RBD$diffWeight[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),RBD$brierDiff[tr],RBD$diffWeight))
}
for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
RBD$brierDiff[tr] <- RBD$Brier[tr]-RBD$Brier[tr-1]
RBD$diffWeight[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),RBD$brierDiff[tr],RBD$diffWeight))
}
RBD <- read.csv("tradeData.csv")    #RBD => raw brier data
#brierDiff <- rep(2,length(RBD))
RBD[1:20,]
RBD$brierDiff[1] <- NA
RBD$diffWeight[1] <- NA
RBD[1:5,]
for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
RBD$brierDiff[tr] <- RBD$Brier[tr]-RBD$Brier[tr-1]
RBD$diffWeight[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),RBD$brierDiff[tr],RBD$diffWeight))
}
for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")>0) {
RBD$brierDiff[tr] <- RBD$Brier[tr]-RBD$Brier[tr-1]
RBD$diffWeight[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"days")
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],units="days"),RBD$brierDiff[tr],RBD$diffWeight[tr]))
}
RBD <- read.csv("tradeData.csv")    #RBD => raw brier data
RBD$brierDiff[1] <- NA
RBD$diffWeight[1] <- NA
for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"sec")>0) {
RBD$brierDiff[tr] <- RBD$Brier[tr]-RBD$Brier[tr-1]
RBD$diffWeight[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"sec")
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],"sec"),RBD$brierDiff[tr],RBD$diffWeight[tr]))
}
RBD[1:20]
RBD91:20,
RBD[1:20,]
for (tr in 2:300) {
if (RBD$questionId[tr]==RBD$questionId[tr-1] &difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]))>0) {
RBD$brierDiff[tr] <- RBD$Brier[tr]-RBD$Brier[tr-1]
#    RBD$diffWeight[tr] <- difftime(as.POSIXct(RBD$tradedAt[tr]),as.POSIXct(RBD$tradedAt[tr-1]),"sec")
RBD$diffWeight[tr] <- as.POSIXct(RBD$tradedAt[tr])-as.POSIXct(RBD$tradedAt[tr-1])
} else {brierDiff[tr] <- NA}
print(c(tr,RBD$questionId[tr],RBD$questionId[tr-1],difftime(RBD$tradedAt[tr],RBD$tradedAt[tr-1],"sec"),RBD$brierDiff[tr],RBD$diffWeight[tr]))
}
RBD[1:20,]
